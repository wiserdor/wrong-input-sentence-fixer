{"ast":null,"code":"var startOnSelection=function startOnSelection(){var INPUT_ELEMENTS_TAGS=[\"input\",\"textarea\"];var INPUT_TYPES=[\"text\",\"search\"];var shouldChangeText=function shouldChangeText(el){return INPUT_ELEMENTS_TAGS.some(function(tag){var _el$tagName,_el$tagName2;return((_el$tagName=el.tagName)===null||_el$tagName===void 0?void 0:_el$tagName.toLowerCase())===\"input\"?INPUT_TYPES.some(function(attr){return attr===el.getAttribute(\"type\");}):tag===((_el$tagName2=el.tagName)===null||_el$tagName2===void 0?void 0:_el$tagName2.toLowerCase());});};document.addEventListener(\"selectionchange\",function(){var selection=document.getSelection();if(selection){var currentInput=document.activeElement;if(currentInput&&shouldChangeText(currentInput)){var textSelected=selection.toString();if(textSelected===\"wow\")currentInput.value=\"bla\";}}});};var startEventListener=function startEventListener(tabId,changeInfo,tab){chrome.scripting.executeScript({target:{tabId:tabId},func:startOnSelection});};chrome.tabs.onUpdated.addListener(startEventListener);export{};","map":{"version":3,"names":["startOnSelection","INPUT_ELEMENTS_TAGS","INPUT_TYPES","shouldChangeText","el","some","tag","tagName","toLowerCase","attr","getAttribute","document","addEventListener","selection","getSelection","currentInput","activeElement","textSelected","toString","value","startEventListener","tabId","changeInfo","tab","chrome","scripting","executeScript","target","func","tabs","onUpdated","addListener"],"sources":["/Users/dorwiser/projects/wrong-input-sentence-fixer/extension/src/chromeServices/background.ts"],"sourcesContent":["const startOnSelection = () => {\n  const INPUT_ELEMENTS_TAGS = [\"input\", \"textarea\"];\n  const INPUT_TYPES = [\"text\", \"search\"];\n\n  const shouldChangeText = (el: HTMLInputElement): boolean =>\n    INPUT_ELEMENTS_TAGS.some((tag) =>\n      el.tagName?.toLowerCase() === \"input\"\n        ? INPUT_TYPES.some((attr) => attr === el.getAttribute(\"type\"))\n        : tag === el.tagName?.toLowerCase()\n    );\n\n  document.addEventListener(\"selectionchange\", () => {\n    const selection = document.getSelection();\n    if (selection) {\n      const currentInput = document.activeElement as HTMLInputElement;\n      if (currentInput && shouldChangeText(currentInput)) {\n        const textSelected = selection.toString();\n        if (textSelected === \"wow\") currentInput.value = \"bla\";\n      }\n    }\n  });\n};\n\nconst startEventListener = (\n  tabId: number,\n  changeInfo: chrome.tabs.TabChangeInfo,\n  tab: chrome.tabs.Tab\n) => {\n  chrome.scripting.executeScript({\n    target: { tabId },\n    func: startOnSelection,\n  });\n};\n\nchrome.tabs.onUpdated.addListener(startEventListener);\n\nexport {};\n"],"mappings":"AAAA,GAAMA,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7B,GAAMC,oBAAmB,CAAG,CAAC,OAAD,CAAU,UAAV,CAA5B,CACA,GAAMC,YAAW,CAAG,CAAC,MAAD,CAAS,QAAT,CAApB,CAEA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,EAAD,QACvBH,oBAAmB,CAACI,IAApB,CAAyB,SAACC,GAAD,qCACvB,cAAAF,EAAE,CAACG,OAAH,kDAAYC,WAAZ,MAA8B,OAA9B,CACIN,WAAW,CAACG,IAAZ,CAAiB,SAACI,IAAD,QAAUA,KAAI,GAAKL,EAAE,CAACM,YAAH,CAAgB,MAAhB,CAAnB,EAAjB,CADJ,CAEIJ,GAAG,kBAAKF,EAAE,CAACG,OAAR,uCAAK,aAAYC,WAAZ,EAAL,CAHgB,EAAzB,CADuB,EAAzB,CAOAG,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,CAA6C,UAAM,CACjD,GAAMC,UAAS,CAAGF,QAAQ,CAACG,YAAT,EAAlB,CACA,GAAID,SAAJ,CAAe,CACb,GAAME,aAAY,CAAGJ,QAAQ,CAACK,aAA9B,CACA,GAAID,YAAY,EAAIZ,gBAAgB,CAACY,YAAD,CAApC,CAAoD,CAClD,GAAME,aAAY,CAAGJ,SAAS,CAACK,QAAV,EAArB,CACA,GAAID,YAAY,GAAK,KAArB,CAA4BF,YAAY,CAACI,KAAb,CAAqB,KAArB,CAC7B,CACF,CACF,CATD,EAUD,CArBD,CAuBA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CACzBC,KADyB,CAEzBC,UAFyB,CAGzBC,GAHyB,CAItB,CACHC,MAAM,CAACC,SAAP,CAAiBC,aAAjB,CAA+B,CAC7BC,MAAM,CAAE,CAAEN,KAAK,CAALA,KAAF,CADqB,CAE7BO,IAAI,CAAE5B,gBAFuB,CAA/B,EAID,CATD,CAWAwB,MAAM,CAACK,IAAP,CAAYC,SAAZ,CAAsBC,WAAtB,CAAkCX,kBAAlC,EAEA"},"metadata":{},"sourceType":"module"}