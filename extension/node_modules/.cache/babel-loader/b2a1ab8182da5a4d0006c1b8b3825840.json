{"ast":null,"code":"var INPUT_ELEMENTS_TAGS=[\"input\",\"textarea\"];var INPUT_TYPES=[\"text\",\"search\"];var shouldChangeText=function shouldChangeText(el){return INPUT_ELEMENTS_TAGS.some(function(tag){return el.tagName.toLowerCase()===\"input\"?INPUT_TYPES.some(function(attr){return attr===el.getAttribute(\"type\");}):tag===el.tagName.toLowerCase();});};var startOnSelection=function startOnSelection(){document.addEventListener(\"selectionchange\",function(){if(document.getSelection){var _document$getSelectio;var currentInput=document.activeElement;if(!currentInput||!shouldChangeText(currentInput))return;var textSelected=(_document$getSelectio=document.getSelection())===null||_document$getSelectio===void 0?void 0:_document$getSelectio.toString();console.log(textSelected);currentInput.value=\"bla\";}});};var startEventListener=function startEventListener(tab){chrome.scripting.executeScript({target:{tabId:tab.id},func:startOnSelection});};chrome.tabs.onCreated.addListener(startEventListener);export{};","map":{"version":3,"names":["INPUT_ELEMENTS_TAGS","INPUT_TYPES","shouldChangeText","el","some","tag","tagName","toLowerCase","attr","getAttribute","startOnSelection","document","addEventListener","getSelection","currentInput","activeElement","textSelected","toString","console","log","value","startEventListener","tab","chrome","scripting","executeScript","target","tabId","id","func","tabs","onCreated","addListener"],"sources":["/Users/dorwiser/projects/wrong-input-sentence-fixer/extension/src/chromeServices/background.ts"],"sourcesContent":["const INPUT_ELEMENTS_TAGS = [\"input\", \"textarea\"];\nconst INPUT_TYPES = [\"text\", \"search\"];\n\nconst shouldChangeText = (el: Element): boolean =>\n  INPUT_ELEMENTS_TAGS.some((tag) =>\n    el.tagName.toLowerCase() === \"input\"\n      ? INPUT_TYPES.some((attr) => attr === el.getAttribute(\"type\"))\n      : tag === el.tagName.toLowerCase()\n  );\n\nconst startOnSelection = () => {\n  document.addEventListener(\"selectionchange\", () => {\n    if (document.getSelection) {\n      const currentInput = document.activeElement as HTMLInputElement;\n      if (!currentInput || !shouldChangeText(currentInput)) return;\n      const textSelected = document.getSelection()?.toString();\n      console.log(textSelected);\n      currentInput.value = \"bla\";\n    }\n  });\n};\n\nconst startEventListener = (tab: chrome.tabs.Tab) => {\n  chrome.scripting.executeScript({\n    target: { tabId: tab.id! },\n    func: startOnSelection,\n  });\n};\n\nchrome.tabs.onCreated.addListener(startEventListener);\n\nexport {};\n"],"mappings":"AAAA,GAAMA,oBAAmB,CAAG,CAAC,OAAD,CAAU,UAAV,CAA5B,CACA,GAAMC,YAAW,CAAG,CAAC,MAAD,CAAS,QAAT,CAApB,CAEA,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,EAAD,QACvBH,oBAAmB,CAACI,IAApB,CAAyB,SAACC,GAAD,QACvBF,GAAE,CAACG,OAAH,CAAWC,WAAX,KAA6B,OAA7B,CACIN,WAAW,CAACG,IAAZ,CAAiB,SAACI,IAAD,QAAUA,KAAI,GAAKL,EAAE,CAACM,YAAH,CAAgB,MAAhB,CAAnB,EAAjB,CADJ,CAEIJ,GAAG,GAAKF,EAAE,CAACG,OAAH,CAAWC,WAAX,EAHW,EAAzB,CADuB,EAAzB,CAOA,GAAMG,iBAAgB,CAAG,QAAnBA,iBAAmB,EAAM,CAC7BC,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,CAA6C,UAAM,CACjD,GAAID,QAAQ,CAACE,YAAb,CAA2B,2BACzB,GAAMC,aAAY,CAAGH,QAAQ,CAACI,aAA9B,CACA,GAAI,CAACD,YAAD,EAAiB,CAACZ,gBAAgB,CAACY,YAAD,CAAtC,CAAsD,OACtD,GAAME,aAAY,wBAAGL,QAAQ,CAACE,YAAT,EAAH,gDAAG,sBAAyBI,QAAzB,EAArB,CACAC,OAAO,CAACC,GAAR,CAAYH,YAAZ,EACAF,YAAY,CAACM,KAAb,CAAqB,KAArB,CACD,CACF,CARD,EASD,CAVD,CAYA,GAAMC,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,GAAD,CAA0B,CACnDC,MAAM,CAACC,SAAP,CAAiBC,aAAjB,CAA+B,CAC7BC,MAAM,CAAE,CAAEC,KAAK,CAAEL,GAAG,CAACM,EAAb,CADqB,CAE7BC,IAAI,CAAEnB,gBAFuB,CAA/B,EAID,CALD,CAOAa,MAAM,CAACO,IAAP,CAAYC,SAAZ,CAAsBC,WAAtB,CAAkCX,kBAAlC,EAEA"},"metadata":{},"sourceType":"module"}